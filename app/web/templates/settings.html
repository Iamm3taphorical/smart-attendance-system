{% extends "base.html" %}

{% block content %}
<div class="mb-4">
    <h1 style="font-size: 1.875rem; font-weight: 700; margin-bottom: 0.5rem;">Settings</h1>
    <p style="color: var(--text-secondary);">System configuration and preferences</p>
</div>

<!-- System Info -->
<div class="table-container" style="margin-bottom: 2rem;">
    <div class="table-header">
        <h2 style="font-size: 1.25rem; font-weight: 600;">System Information</h2>
    </div>
    <div style="padding: 1.5rem;">
        <table style="width: 100%;">
            <tr>
                <td style="padding: 0.75rem; border-bottom: 1px solid var(--border); font-weight: 600;">System Name</td>
                <td style="padding: 0.75rem; border-bottom: 1px solid var(--border);">{{ config.system.name }}</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border-bottom: 1px solid var(--border); font-weight: 600;">Version</td>
                <td style="padding: 0.75rem; border-bottom: 1px solid var(--border);">{{ config.system.version }}</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border-bottom: 1px solid var(--border); font-weight: 600;">Database Path</td>
                <td style="padding: 0.75rem; border-bottom: 1px solid var(--border);">{{ config.database.path }}</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border-bottom: 1px solid var(--border); font-weight: 600;">Recognition Model</td>
                <td style="padding: 0.75rem; border-bottom: 1px solid var(--border);">{{ config.face_recognition.model_backend }}</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border-bottom: 1px solid var(--border); font-weight: 600;">Detection Model</td>
                <td style="padding: 0.75rem; border-bottom: 1px solid var(--border);">{{ config.face_recognition.detection_model }}</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; border-bottom: 1px solid var(--border); font-weight: 600;">Tolerance</td>
                <td style="padding: 0.75rem; border-bottom: 1px solid var(--border);">{{ config.face_recognition.tolerance }}</td>
            </tr>
            <tr>
                <td style="padding: 0.75rem; font-weight: 600;">Camera Resolution</td>
                <td style="padding: 0.75rem;">{{ config.camera.width }}x{{ config.camera.height }} @ {{ config.camera.fps }}fps</td>
            </tr>
        </table>
    </div>
</div>

<!-- Database Stats -->
<div class="table-container" style="margin-bottom: 2rem;">
    <div class="table-header">
        <h2 style="font-size: 1.25rem; font-weight: 600;">Database Statistics</h2>
    </div>
    <div style="padding: 1.5rem;">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-title">Total Students</div>
                <div class="stat-value">{{ stats.total_students }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Attendance Records</div>
                <div class="stat-value">{{ stats.total_records }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Unknown Faces</div>
                <div class="stat-value">{{ stats.unknown_faces }}</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Alerts</div>
                <div class="stat-value">{{ stats.total_alerts }}</div>
            </div>
        </div>
    </div>
</div>

<!-- Actions -->
<div class="table-container">
    <div class="table-header">
        <h2 style="font-size: 1.25rem; font-weight: 600;">System Actions</h2>
    </div>
    <div style="padding: 1.5rem; display: flex; flex-direction: column; gap: 1rem;">
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--bg-primary); border-radius: 0.5rem;">
            <div>
                <div style="font-weight: 600;">Clear Unknown Faces</div>
                <div style="font-size: 0.875rem; color: var(--text-secondary);">Remove all unknown face records and images</div>
            </div>
            <button onclick="alert('This feature requires confirmation. Implement with POST request.')" class="btn" style="background: var(--danger); color: white;">Clear</button>
        </div>
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--bg-primary); border-radius: 0.5rem;">
            <div>
                <div style="font-weight: 600;">Export All Data</div>
                <div style="font-size: 0.875rem; color: var(--text-secondary);">Download complete database backup</div>
            </div>
            <a href="{{ url_for('export_csv', all=1) }}" class="btn btn-primary">Export</a>
        </div>
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--bg-primary); border-radius: 0.5rem;">
            <div>
                <div style="font-weight: 600;">View Configuration</div>
                <div style="font-size: 0.875rem; color: var(--text-secondary);">Edit config.yaml file</div>
            </div>
            <span style="color: var(--text-secondary); font-size: 0.875rem;">Edit manually in project directory</span>
        </div>
    </div>
</div>
{% endblock %}
